\section{Requirements}
We list the project requirements.

\subsection{UHI -- User hierarchy interaction}
\paragraph{R-UHI-010 -- Adding hierarchy items}
The software shall allow the user to add hierarchy items.

\paragraph{R-UHI-020 -- Inactivating hierarchy items}
The software shall allow the user to move hierarchy items
from the active items set to the inactive items set.

\paragraph{R-UHI-030 -- Editing hierarchy items}
The software shall allow the user to edit the properties of
active hierarchy items.

\paragraph{R-UHI-040 -- Activating hierarchy items}
The software shall allow the activation of previously inactivated hierarchy
items. The corresponding identification must be the same as before
inactivation.

\paragraph{R-UHI-050 -- Project inactivation effect}
The inactivation of a project shall cause the tasks belonging to the project to
be inactivated.

\paragraph{R-UHI-060 -- Removing hierarchy items}
The software shall allow the removal of hierarchy items which are
not used in any entry. The removal of hierarchy items currently
used in an entry is disallowed.

\subsection{UEI -- User entries interaction}
\paragraph{R-UEI-010 -- Adding entries}
The software shall allow the user to add new entries.

\paragraph{R-UEI-040 -- Removing entries}
The software shall allow the user to remove entries.

\paragraph{R-UEI-050 -- Editing entries}
The software shall allow the user to edit past entries properties.
Note that it is allowed to assign inactive hierarchy items to
part entries.

\subsection{UGL -- User graphical layout}
\paragraph{R-UGL-010 -- \gls{UI} screens breakdown}
The software shall present to the user the following \gls{UI} screens:

\begin{compactitem}
\item (interaction) Daily entries
\item (interaction) Hierarchy items: projects and tasks
\item (interaction) Hierarchy items: locations
\item (report) Project totals
\item (report) Weekly report
\end{compactitem}

\subsection{DES -- Daily entries screen}
\paragraph{R-DES-010 -- Daily entries}
The daily entries \gls{UI} screen shall implement the user interface for adding,
editing and removing entries.

\paragraph{R-DES-020 -- Day selection}
The daily entries \gls{UI} screen shall allow the user to select the day for
which entries must be interacted with.

\paragraph{R-DES-030 -- Display entries of the day}
The daily entries \gls{UI} screen shall display the list of entries for the
currently selected day.

\paragraph{R-DES-040 -- Running daily total}
The daily entries \gls{UI} screen shall display the running duration of time
worked on the selected day. This includes all entries on a given day.

\subsection{ENI -- Entry interaction}
\paragraph{R-ENI-030 -- Entry metadata hierarchy search}
The entry metadata fields relevant to hierarchy items shall be fillable
through a fuzzy search over the corresponding set of hierarchy items.

\paragraph{R-ENI-040 -- Entry metadata hierarchy coherence}
The entry metadata interface shall forbid the creation or edition of
hierarchy items metadata outside of the set of hierarchy items.

Rationale: We want to avoid the proliferation of different hierarchy items which
would be caused by accepting anything in the entry fields.

\subsection{HIS -- Hierarchy items screens}
\paragraph{R-HIS-010 -- Hierarchy items}
The hierarchy items \gls{UI} screens shall implement the user interactions with
hierarchy items.

\paragraph{R-HIS-020 -- Hierarchy items display}
The hierarchy items \gls{UI} screen shall display the list of tasks
grouped per project.

\subsection{GUI -- Graphical user interface}
\paragraph{R-GUI-010 -- Keyboard usage}
The software shall allow full user interaction through a keyboard interface.

\subsection{LDC -- Logged data content}
\paragraph{R-LDC-010 -- Entry identification}
The entries shall be identified with a unique code.

\paragraph{R-LDC-020 -- Entry metadata}
The entries shall be associated with the following metadata unambiguously,
\begin{compactitem}
\item a task,
\item a start date,
\item a stop date,
\item a location.
\end{compactitem}

\paragraph{R-LDC-050 -- Project identification}
Projects shall be identified by a unique code.

\paragraph{R-LDC-060 -- Project metadata}
Projects shall be associated unambiguously to their full name.

\paragraph{R-LDC-070 -- Task identification}
Tasks shall be identified by a unique code.

\paragraph{R-LDC-080 -- Task metadata}
Tasks shall be associated unambiguously to their,
\begin{compactitem}
  \item full name,
  \item project.
  \end{compactitem}

\paragraph{R-LDC-090 -- Location identification}
Locations shall be identified by a unique code.

\paragraph{R-LDC-100 -- Location metadata}
Locations shall be associated unambiguously to their full name.

\subsection{TIM -- Time management}
\paragraph{R-TIM-010 -- Time standard}
The software shall use \gls{UTC} time internally as its datation format.

Rationale: we need to maintain the chronology of events in an interoperable
fashion.

\paragraph{R-TIM-020 -- Time reference}
The software datation shall use the system clock as its time reference.

\paragraph{R-TIM-030 -- Time zones}
The software shall display dates using a user-configurable time zone.

\paragraph{R-TIM-040 -- Time resolution}
The dates and durations in the software shall be saved and operated
on with a resolution of one second.

\subsection{SAV -- Save management}
\paragraph{R-SAV-010 -- Save}
The software shall provide a mechanism for saving the timesheet data
and hierarchy items to the system's persistent memory storage.

\paragraph{R-SAV-020 -- Transparent save}
The saving mechanism shall be transparent to the user, ie there should
not be a need for the user to press a button to perform the save operation.

\paragraph{R-SAV-030 -- Timesheet save resolution}
The saving mechanism shall save timesheet data anytime an entry is
created, modified or deleted.

\paragraph{R-SAV-031 -- Hierarchy items save resolution}
The saving mechanism shall save the hierarchy items data anytime
a hierarchy item is created, modified, deleted or restored.

\paragraph{R-SAV-050 -- Switch save profile}
The software shall allow the user to switch between different save profiles.

\paragraph{R-SAV-060 -- Starting save profile}
The software shall start by default with the latest loaded save profile
selected.

\subsection{BAK -- Backup}
\paragraph{R-BAK-010 -- Backup}
The software shall provide a backup mechanism to the user.

\paragraph{R-BAK-020 -- Backup restore}
The software shall allow a backup restore mechanism to the user.

\paragraph{R-BAK-030 -- Backup completeness}
The whole data state of the software shall be saved and restored using the
backup. Logs are not included in the data state.

\paragraph{R-BAK-040 -- Backup conciseness}
The backup archive shall consist of a single file.

\paragraph{R-BAK-060 -- Backup naming}
The backup mechanism shall allow the user to choose a custom name for the
archive.

\paragraph{R-BAK-070 -- Backup location}
The backup mechanism shall allow the user to choose the location of the
archive on the system's directory tree.

\subsection{DEX -- Data export}
\paragraph{R-DEX-010 -- Timesheet export}
The software shall allow the user to export timesheet data in an interoperable
format compliant with [AD1].

\paragraph{R-DEX-020 -- Export naming}
The timesheet export process shall allow the user to name the export file.

\paragraph{R-DEX-030 -- Export location}
The timesheet export process shall allow the user to select the location
of the export file on the system's directory tree.

\paragraph{R-DEX-050 -- Export time period}
The export tool shall allow the user to select the time period to consider
for the timesheet export.

\subsection{ACC -- Accessibility}
\paragraph{R-ACC-010 -- Single user}
The software shall allow operation by a single user on a single system.

\paragraph{R-ACC-020 -- Synchronization across systems}
The software documentation shall explain a process for the user to keep save
profiles data in sync across systems. Note we assume the reliance upon external
data exchange mechanisms outside of the software's technical scope.

\paragraph{R-ACC-030 -- Company segregation}
The software shall keep the save profiles data segregated by company.
In effect, this means a given save profile is uniquely associated with a
company.

\paragraph{R-ACC-040 -- Data confidentiality}
The software interface and save profile data shall remain local to the system.

\paragraph{R-ACC-050 -- Offline operation}
The software shall allow offline (no internet connection) operation for all of
its features. This excludes the build system.

\paragraph{R-ACC-060 -- Interface language}
The software interface shall be in english.

\paragraph{R-ACC-070 -- Documentation language}
The software documentation shall be in english.

\paragraph{R-ACC-080 -- Code language}
The software codebase shall be written with names and comments
in english.

\subsection{ENV -- Environment}
\paragraph{R-ENV-010 -- Target hardware}
The software shall run on a low-end desktop computer or laptop.

\paragraph{R-ENV-020 -- Target OS}
The software shall run on GNU/Linux.

\paragraph{R-ENV-030 -- Target OS version}
The software shall run on the current version of Gentoo Linux.

\paragraph{R-ENV-040 -- Target graphical environment}
The software shall run on the Wayland compositor Hyprland \cite{hyprland}.

\subsection{PER -- Performance}
\paragraph{R-PER-010 -- Memory footprint}
The peak memory footprint of the software shall be less than 100 MB.
The amount of memory to consider is the \emph{resident set size}.

\subsection{URE -- User reports}
\paragraph{R-URE-010 -- Durations display format}
In the reports, the durations shall be displayed with a selectable format,
either,
\begin{compactitem}
  \item minutes,
  \item or hours,
  \item or days.
\end{compactitem}

\paragraph{R-URE-020 -- Day duration definition}
The software shall provide a way for the user to define the duration of a day.

\subsection{RPT -- Report: Project totals}
\paragraph{R-RPT-010 -- Project totals}
The project totals \gls{UI} screen shall display the total durations of time
worked on projects within a user-specified time period.

\paragraph{R-RPT-020 -- Project totals time period}
The project totals \gls{UI} shall allow the user to select the time period
of interest via the selection of a beginning day and an end day. The
beginning and end days are included in the time period.

\subsection{RWT -- Report: Weekly totals}
\paragraph{R-RWT-010 -- Weekly report}
The weekly report \gls{UI} screen shall display the task-wise daily total
durations of time worked, grouped per project.

\paragraph{R-RWT-020 -- Weekly report daily totals}
The weekly report shall display the total duration worked per day, including
all tasks in the sum.

\paragraph{R-RWT-030 -- Weekly report weekly totals}
The weekly report shall display the total weekly work duration, including
all tasks in the sum.

\paragraph{R-RWT-040 -- Weekly report running week}
The weekly report shall be generated even in the case of the current, unfinished
week.

\paragraph{R-RWT-050 -- Weekly report week selection}
The weekly report \gls{UI} shall allow the user to select the week the report is
generated for.

\subsection{LOG -- Logging}
\paragraph{R-LOG-010 -- User data interaction logging}
The software shall log all user interactions which modify the timesheet
data or the hierarchy items data.

\paragraph{R-LOG-020 -- Log file location}
The software logs shall be saved on the system's persistent memory.

\paragraph{R-LOG-025 -- Log cleanup period}
The software shall provide a way for the user to define a
maximal log age above which log entries are to be deleted.

\paragraph{R-LOG-040 -- Log cleanup}
The software log entries older than the maximal age shall be deleted.

\paragraph{R-LOG-050 -- Log cleanup schedule}
The software log cleanup shall apply at every software start.

\paragraph{R-LOG-060 -- Log readability}
The software log shall be stored in plain text format readable
by the \emph{less} program.

\paragraph{R-LOG-070 -- Log accessibility}
The software log shall be readable by the user even in case the software
fails to start entirely.

\subsection{QUA -- Quality}
\paragraph{R-QUA-010 -- Version report}
The software shall display its version number to the user upon query.

\paragraph{R-QUA-020 -- Save data validation}
The software shall provide a mechanism for testing the soundness of the
save data upon loading it.

\paragraph{R-QUA-025 -- Save data action}
In case the software detects a save data unsoundness, it shall terminate
with an error message indicating the type of error.

\paragraph{R-QUA-030 -- Release signature}
Every released product, either software or documentation shall be signed
with the supplier's GPG key.

\paragraph{R-QUA-040 -- Single repository}
For the whole project lifecycle, the software and associated documentation shall
be stored in a single version-controlled repository.

\paragraph{R-QUA-050 -- Bug tracker information}
The software shall indicate to the user where to report bugs and issues.

\subsection{TES -- Testing}
\paragraph{R-TES-010 -- Automated build test}
The software build system shall include an automated build test, reporting
whether the build is successful in the target environment.
The target environment for building is the same as the target environment for
the software.

\subsection{DOC -- Documentation}
\paragraph{R-DOC-010 -- Development documentation}
The software documentation shall include a developer code documentation (eg.
Doxygen).

\paragraph{R-DOC-020 -- User manual}
The software documentation shall include a user manual (eg. troff man page).

\paragraph{R-DOC-050 -- Software build instructions}
The software documentation shall include the instructions for building
the software from source.

\paragraph{R-DOC-060 -- Documentation build instructions}
The software documentation shall include the instructions for building
the documentation artifacts.

\paragraph{R-DOC-070 -- Matrix of conformity}
A conformity matrix with respect to the present specification document shall
be produced and released along with every major software release.

\paragraph{R-DOC-080 -- Architecture and design document}
The software documentation shall include a document describing the architecture
and design choices.

\subsection{REL -- Release}
\paragraph{R-REL-010 -- Software version format}
The software version shall include a major version and a minor version.

\paragraph{R-REL-020 -- Release notes}
The software documentation shall include release notes.

\paragraph{R-REL-030 -- Release notes granularity}
The release notes shall apply to individual minor software versions.

\paragraph{R-REL-040 -- Release notes publication}
The release notes shall be updated and released at least for every minor
version of the software.

\paragraph{R-REL-050 -- Documentation release}
The full up-to-date software documentation shall be released along with
every major software version release.

\paragraph{R-REL-060 -- Build dependencies}
The software build dependencies shall be automatically downloaded or included by
the build system.

\paragraph{R-REL-070 -- Release format}
The software shall be released in the form of source code, ready for build.

\subsection{DEP -- Deployment}
\paragraph{R-DEP-010 -- Installation script}
The software shall provide an installation script.

\paragraph{R-DEP-020 -- Uninstallation script}
The software shall provide an uninstallation script.

\subsection{LIC -- Licensing}
\paragraph{R-LIC-010 -- Source code license}
The software license for the source code shall be a permissive open-source
license.

\paragraph{R-LIC-020 -- Documentation license}
The software documentation shall be licensed under license at most as
restrictive as the CC-BY license.
